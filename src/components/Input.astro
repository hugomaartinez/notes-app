---
import EyeIcon from "./Icons/EyeIcon.astro";
import EyeOffIcon from "./Icons/EyeOffIcon.astro";

const { type, label, placeholder, required } = Astro.props;
---

<div class="form-group mb-4 relative">
  <label for={type} class="block text-gray-700 font-bold mb-2">{label}</label>
  <input
    id={type}
    name={type}
    type={type}
    required={required}
    class="w-full px-3 py-2 border border-gray-300 rounded-lg pr-10"
    placeholder={placeholder}
  />
  {
    type === "password" && (
      <button type="button" class="absolute top-0 right-0 mt-10 mr-4">
        <EyeOffIcon className="w-6 h-6 text-gray-700 hidden" />
        <EyeIcon className="w-6 h-6 text-gray-700" />
      </button>
    )
  }
</div>

<script is:inline>
  document.querySelector("button").addEventListener("click", function () {
    const password = document.getElementById("password");
    const eyeIcon = document.querySelector("svg:first-child");
    const eyeOffIcon = document.querySelector("svg:last-child");

    if (password.type === "password") {
      password.type = "text";
      eyeIcon.classList.remove("hidden");
      eyeOffIcon.classList.add("hidden");
    } else {
      password.type = "password";
      eyeIcon.classList.add("hidden");
      eyeOffIcon.classList.remove("hidden");
    }
  });
</script>
